{% extends 'base.html' %}

{% block title %}Search | SF Chronicle{% endblock %}

{% block hearst_title %}Top 100 Restaurants: Search{% endblock %}
{% block channelpath %} :: Search{% endblock %}

{% block twitter_url %}{{ url_for('search_view') }}{% endblock %}
{% block fb_url %}{{ url_for('search_view') }}{% endblock %}
{% block fb_title %}Top 100 Restaurants | Search{% endblock %}

{% block head %}

{% endblock %}

{% block header %}
    <h1>SEARCH</h1>
{% endblock %}

{% block social %}

	{% include 'components/search_social.html' %}

{% endblock %}

{% block content %}

<div class="search-container">
  <span class="search">Search by restaurant name or cuisine:</span>
  <input class="input" id="input" type="text" placeholder="Try Mexican, Italian or American... ">
</div>

<div id="top100" class="row small-up-2 large-up-4 restaurants">
	{% for r in restaurants %}
	<div class="column restaurant {{r.Cuisine}} {{r.slug}} active">
		<a href="{{ url_for('restaurant_view', slug=r.slug) }}"><img class="thumbnail" src="{{r.thumbnail}}"></a>
		<h5>{{ r.Name }}</h5>

			<span class="cuisine-label">{{r.Cuisine}}</span>

	</div>
	{% endfor %}
</div>


{% endblock %}

{% block javascript %}
<script>
  $(document).ready(function() {
    App.init();
  });

	//$("input").change(function() {
  $("input").bind("input propertychange", function() {
		var filter = $(this).val().toLowerCase();
		var class_match = 0;

		$(".restaurant").filter(function() {

			var classes = this.className.split(" ");
			for (var i=0; i< classes.length; i++) {

				var current_class = classes[i].toLowerCase();

				if (classes[i] != "column" && classes[i] != "restaurant") {
					if ( current_class.match(filter)) {
						class_match = class_match + 1;
					}
				}
			}
			if (class_match > 0) {
				$(this).addClass("active");
			} else {
				$(this).removeClass("active");
			}
			class_match = 0;

		});

	});

	// $(function() {
	//   $('nav a[href^="/' + location.pathname.split("/")[1] + '"]').addClass('active-page');
	// });


</script>
{% endblock %}
